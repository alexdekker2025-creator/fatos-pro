# Как запустить FATOS.pro локально

## Быстрый старт

### Вариант 1: Автоматический запуск (рекомендуется)

#### Для PowerShell (Windows):
```powershell
.\start-local.ps1
```

#### Для Bash (Git Bash на Windows / Linux / Mac):
```bash
chmod +x start-local.sh
./start-local.sh
```

Скрипт автоматически:
- Проверит наличие Node.js
- Создаст `.env.local` из `.env.example` (если нужно)
- Установит зависимости
- Сгенерирует Prisma клиент
- Запустит сервер разработки

### Вариант 2: Ручной запуск

1. **Установите зависимости:**
   ```bash
   npm install
   ```

2. **Настройте переменные окружения:**
   - Скопируйте `.env.example` в `.env.local`
   - Отредактируйте `.env.local` и заполните необходимые переменные

3. **Сгенерируйте Prisma клиент:**
   ```bash
   npx prisma generate
   ```

4. **Запустите сервер:**
   ```bash
   npm run dev
   ```

5. **Откройте браузер:**
   - Перейдите на http://localhost:3000

## Важные переменные окружения

В файле `.env.local` обязательно заполните:

```env
# База данных (обязательно!)
DATABASE_URL="postgresql://user:password@localhost:5432/fatos"

# Секретный ключ для NextAuth (обязательно!)
NEXTAUTH_SECRET="ваш_случайный_секретный_ключ_минимум_32_символа"

# URL приложения
NEXTAUTH_URL="http://localhost:3000"

# Email сервис (для отправки писем)
RESEND_API_KEY="ваш_api_ключ_resend"
RESEND_FROM_EMAIL="noreply@yourdomain.com"
```

### Как получить DATABASE_URL?

#### Вариант 1: Использовать существующую базу Neon (рекомендуется)
Скопируйте строку подключения из вашего `.env` файла на продакшене.

#### Вариант 2: Локальный PostgreSQL
1. Установите PostgreSQL
2. Создайте базу данных:
   ```sql
   CREATE DATABASE fatos;
   ```
3. Используйте строку подключения:
   ```
   postgresql://postgres:password@localhost:5432/fatos
   ```

### Как сгенерировать NEXTAUTH_SECRET?

В PowerShell:
```powershell
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

В Bash:
```bash
openssl rand -hex 32
```

## Полезные команды

### Просмотр базы данных
```bash
npx prisma studio
```
Откроется веб-интерфейс на http://localhost:5555

### Применить изменения схемы к базе
```bash
npx prisma db push
```

### Создать администратора
```bash
node scripts/make-admin.js
```

### Проверить статус пользователя
```bash
node scripts/check-admin.js
```

## Решение проблем

### Ошибка "Cannot find module"
```bash
npm install
npx prisma generate
```

### Ошибка подключения к базе данных
- Проверьте, что PostgreSQL запущен
- Проверьте правильность `DATABASE_URL` в `.env.local`
- Попробуйте подключиться к базе вручную

### Порт 3000 уже занят
Измените порт в команде запуска:
```bash
PORT=3001 npm run dev
```

### Ошибки TypeScript
```bash
npm run type-check
```

## Структура проекта

```
fatos-pro/
├── app/              # Next.js страницы и API
├── components/       # React компоненты
├── lib/             # Утилиты и сервисы
├── messages/        # Переводы (ru/en)
├── prisma/          # Схема базы данных
├── public/          # Статические файлы
└── scripts/         # Утилитарные скрипты
```

## Дополнительная информация

Подробная документация: [START_LOCAL.md](START_LOCAL.md)

## Нужна помощь?

- Проверьте логи в консоли
- Откройте DevTools в браузере (F12)
- Проверьте файл `.env.local`
- Убедитесь, что база данных доступна
