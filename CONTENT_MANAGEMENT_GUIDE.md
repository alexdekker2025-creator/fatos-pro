# Система управления контентом - Руководство

## Что реализовано

Полноценная система управления статическими страницами сайта с админ-панелью и публичными страницами.

## Возможности

### Админ-панель (вкладка "Контент")

1. **Просмотр всех страниц** - таблица со всеми контентными страницами
2. **Создание страниц** - форма для создания новой страницы
3. **Редактирование** - изменение существующих страниц
4. **Удаление** - удаление страниц с подтверждением
5. **Публикация/Черновик** - управление видимостью страниц
6. **Сортировка** - настройка порядка отображения

### Публичные страницы

Автоматически созданы 4 страницы:
- `/ru/about` - О проекте
- `/ru/privacy` - Политика конфиденциальности
- `/ru/terms` - Пользовательское соглашение
- `/ru/faq` - Часто задаваемые вопросы

Аналогично для `/en/...`

### Футер сайта

Добавлен футер со ссылками на:
- О проекте
- FAQ
- Политика конфиденциальности
- Пользовательское соглашение

## Структура файлов

### База данных
- `prisma/schema.prisma` - модель ContentPage
- `scripts/create-content-pages.js` - скрипт для создания таблицы и начальных данных

### API Endpoints

**Админские (требуют авторизации):**
- `GET /api/admin/content` - список всех страниц
- `POST /api/admin/content` - создать страницу
- `GET /api/admin/content/[id]` - получить страницу
- `PUT /api/admin/content/[id]` - обновить страницу
- `DELETE /api/admin/content/[id]` - удалить страницу

**Публичные:**
- `GET /api/content/[slug]` - получить опубликованную страницу

### Компоненты
- `components/admin/ContentManager.tsx` - админ-интерфейс управления контентом
- `components/Footer.tsx` - футер сайта с ссылками
- `app/[locale]/[slug]/page.tsx` - динамический роут для отображения страниц

### Переводы
- `messages/ru.json` - русские переводы (admin.content, footer)
- `messages/en.json` - английские переводы (admin.content, footer)

## Как использовать

### Создание новой страницы

1. Войдите в админ-панель: `/ru/admin` или `/en/admin`
2. Перейдите на вкладку "Контент"
3. Нажмите "Создать страницу"
4. Заполните форму:
   - **Slug** - URL страницы (например: `about`, `contact`)
   - **Заголовок (RU)** - заголовок на русском
   - **Заголовок (EN)** - заголовок на английском
   - **Контент (RU)** - HTML контент на русском
   - **Контент (EN)** - HTML контент на английском
   - **Опубликовано** - видимость страницы
   - **Порядок сортировки** - число для сортировки
5. Нажмите "Сохранить"

### Редактирование страницы

1. В таблице страниц нажмите "Редактировать"
2. Измените нужные поля
3. Нажмите "Сохранить"

### Удаление страницы

1. В таблице страниц нажмите "Удалить"
2. Подтвердите удаление

### Просмотр публичной страницы

После создания страница доступна по адресу:
- Русская версия: `https://fatos.pro/ru/{slug}`
- Английская версия: `https://fatos.pro/en/{slug}`

## HTML в контенте

Контент поддерживает HTML разметку. Примеры:

```html
<h2>Заголовок</h2>
<p>Параграф текста</p>
<ul>
  <li>Пункт списка 1</li>
  <li>Пункт списка 2</li>
</ul>
<a href="/ru/about">Ссылка</a>
```

## Безопасность

- Все админские endpoints защищены проверкой прав администратора
- Rate limiting для защиты от злоупотреблений
- Логирование всех действий в AdminLog
- Валидация данных на сервере

## SEO

- Автоматическая генерация метаданных для каждой страницы
- Поддержка статической генерации (SSG) для лучшей производительности
- Семантическая HTML разметка

## Стилизация

Страницы используют:
- Градиентный фон (purple-900 → blue-900 → indigo-900)
- Prose стили для типографики
- Адаптивный дизайн
- Backdrop blur эффект

## Что дальше?

### Возможные улучшения:

1. **Rich Text Editor** - заменить textarea на WYSIWYG редактор (TinyMCE, Quill)
2. **Загрузка изображений** - добавить возможность загружать изображения
3. **Версионирование** - история изменений страниц
4. **Предпросмотр** - просмотр страницы перед публикацией
5. **SEO поля** - отдельные поля для meta description, keywords
6. **Шаблоны** - готовые шаблоны страниц
7. **Категории** - группировка страниц по категориям

## Техническая информация

### База данных

Таблица `ContentPage`:
```prisma
model ContentPage {
  id          String   @id @default(cuid())
  slug        String   @unique
  titleRu     String
  titleEn     String
  contentRu   String   @db.Text
  contentEn   String   @db.Text
  isPublished Boolean  @default(true)
  sortOrder   Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
```

### Индексы
- `slug` - уникальный индекс для быстрого поиска
- `isPublished` - для фильтрации опубликованных страниц
- `sortOrder` - для сортировки

## Поддержка

По вопросам работы системы управления контентом обращайтесь к разработчику.
