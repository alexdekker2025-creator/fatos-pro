/**
 * Модуль для работы с именами в нумерологии
 */

/**
 * Русский алфавит с соответствующими числовыми значениями
 * А=1, Б=2, В=3, ..., Я=33
 */
const RUSSIAN_ALPHABET: Record<string, number> = {
  'А': 1, 'Б': 2, 'В': 3, 'Г': 4, 'Д': 5, 'Е': 6, 'Ё': 7, 'Ж': 8, 'З': 9,
  'И': 10, 'Й': 11, 'К': 12, 'Л': 13, 'М': 14, 'Н': 15, 'О': 16, 'П': 17,
  'Р': 18, 'С': 19, 'Т': 20, 'У': 21, 'Ф': 22, 'Х': 23, 'Ц': 24, 'Ч': 25,
  'Ш': 26, 'Щ': 27, 'Ъ': 28, 'Ы': 29, 'Ь': 30, 'Э': 31, 'Ю': 32, 'Я': 33,
};

/**
 * Переводит буквы имени в числа и возвращает их сумму
 * 
 * Правила:
 * - Каждая буква русского алфавита имеет числовое значение от 1 до 33
 * - А=1, Б=2, В=3, ..., Я=33
 * - Функция суммирует значения всех букв в имени
 * - Регистр не имеет значения (все буквы приводятся к верхнему регистру)
 * - Пробелы и небуквенные символы игнорируются
 * 
 * @param name - Имя для обработки
 * @returns Сумма числовых значений всех букв имени
 * 
 * @example
 * sumNameLetters('Анна') // А(1) + Н(15) + Н(15) + А(1) = 32
 * sumNameLetters('Иван') // И(10) + В(3) + А(1) + Н(15) = 29
 */
export function sumNameLetters(name: string): number {
  // Приводим к верхнему регистру и удаляем пробелы
  const normalizedName = name.toUpperCase().trim();
  
  let sum = 0;
  
  // Проходим по каждому символу
  for (const char of normalizedName) {
    // Если символ есть в алфавите, добавляем его значение
    if (RUSSIAN_ALPHABET[char]) {
      sum += RUSSIAN_ALPHABET[char];
    }
    // Пробелы и другие символы игнорируются
  }
  
  return sum;
}

/**
 * Валидирует имя
 * 
 * @param name - Имя для валидации
 * @returns true если имя содержит хотя бы одну букву русского алфавита
 */
export function validateName(name: string): boolean {
  if (!name || name.trim().length === 0) {
    return false;
  }
  
  const normalizedName = name.toUpperCase().trim();
  
  // Проверяем, что есть хотя бы одна буква русского алфавита
  for (const char of normalizedName) {
    if (RUSSIAN_ALPHABET[char]) {
      return true;
    }
  }
  
  return false;
}
